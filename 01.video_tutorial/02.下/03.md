


ç¬¬ä¹è®²ï¼šä¼ä¸šçº§ç›‘æ§æ•°æ®é‡‡é›†â½…æ–¹æ³•

ç¬¬ä¹è®²å†…å®¹å¦‚ä¸‹




1) prometheus æœåŠ¡ç«¯çš„å®‰è£…å’Œåå°ç¨³å®šè¿â¾
2) prometheus æœåŠ¡ç«¯é…ç½®â½‚ä»¶å†™æ³•

3) node_exporter å®‰è£…å’Œåå°è¿â¾

4) node_exporter è§‚å¯Ÿ å’Œ é‡‡é›†æ•°æ®

5) prometheus æŸ¥è¯¢é‡‡é›†å›æ¥çš„å„ç§æ•°æ®

6) ä½¿â½¤æˆ‘ä»¬ä¹‹å‰çš„å­¦è¿‡çš„ prometheus å‘½ä»¤â¾çš„å½¢å¼ ç»ƒä¹ ç»„åˆ å„ç§ç›‘æ§å›¾




ï¼ˆâ¼€ï¼‰ prometheus æœåŠ¡ç«¯çš„å®‰è£…å’Œåå°ç¨³å®šè¿â¾ prometheus çš„ä¸‹è½½åœ°å€ https://prometheus.io/download/#prometheus

ä¸‹è½½å’Œå®‰è£…çš„è¿‡ç¨‹ ç›¸å¯¹â¾®å¸¸çš„ç®€å•




prometheus-2.2.0-rc.0.linux-amd64.tar.gz æœ€æ–°ç‰ˆ

prometheus_serverä¸‹è½½

[root@server04 down]# tar -xvzf prometheus-2.2.0-rc.0.linux- amd64.tar.gz

cp -r prometheus-2.2.0-rc.0.linux-amd64 /usr/local/




ä¹‹åè§£å‹ç¼©å å³å¯ç›´æ¥è¿â¾åœ¨é»˜è®¤çš„9090ç«¯â¼œ ç›´æ¥å°±å¯ä»¥ä½¿

â½¤äº†




image




ä¸è¿‡ æˆ‘ä»¬ä½œä¸ºåˆæ ¼çš„è¿ç»´â¼¯ç¨‹å¸ˆï¼Œå¯¹â½£äº§ç¯å¢ƒä¸Š è¿â¾çš„è½¯ä»¶ éœ€è¦å¤šè€ƒè™‘â¼€äº›æ›´åˆç†çš„è¿â¾æ¨¡å¼

æ¥ä¸‹æ¥ å’±ä»¬æ¥â¼€èµ·çœ‹ä¸‹




1ï¼‰ æˆ‘ä»¬éœ€è¦è®©prometheus_server è¿â¾åœ¨åå° â½½ä¸æ˜¯å‰ç«¯

ï¼ˆå®¢æˆ·ç«¯é€€å‡ºå prometheusä¹Ÿé€€å‡ºäº† è¿™ä¸ªå¾ˆå¥½ç†è§£ï¼‰




ç›¸å¯¹â½è¾ƒå¥½çš„è¿â¾åå°æ¨¡å¼ è¿™â¾¥ç»™â¼¤å®¶æ¨èä¸¤ç§â½…æ³•

& Nohup




ç¬¬â¼€ç§ï¼š å®‰è£…screenâ¼¯å…· æ”¾â¼Šåå°è¿â¾




image




image




image




image

è¿™ç§screenæ”¾â¼Šåå°è¿â¾çš„â½…å¼ æœ€ç®€å•å¿«é€Ÿäº† æœ€é€‚åˆæ‡’â¼ˆä½¿â½¤â€¦.â½å¦‚æˆ‘ å“ˆå“ˆğŸ˜




screenè¿˜æœ‰å¦å¤–â¼€ä¸ªå¥½å¤„ å°±æ˜¯ å¯ä»¥éšæ—¶åˆ‡æ¢è¿›â¼Š ç¨‹åºå‰å°çª—

â¼œ æŸ¥çœ‹å„ç§è°ƒè¯•ä¿¡æ¯




screen ä¹Ÿæœ‰ä¸å¥½çš„åœ°â½…

â€¢ ä¸å¤Ÿæ­£è§„åŒ– æ€»è§‰å¾—è¿˜æ˜¯ä¸ªä¸´æ—¶åŠæ³•

â€¢ screen -l æä¾›çš„åå° åˆ—è¡¨ ä¸å¤Ÿâ¼ˆæ€§åŒ–ï¼Œå¾ˆå¤šæ—¶å€™ ä½ è®°ä¸ ä½ åˆ°åº•å“ªä¸ªæ˜¯å“ªä¸ª

â€¢ å¾ˆå®¹æ˜“è¢«è¯¯å…³é—­ æ“ä½œçš„æ—¶å€™ ctrl +ad / ctrl +d ä¸â¼©â¼¼æ“ä½œ

é”™äº† ç›´æ¥å°±é€€å‡ºå»äº†..




ç¬¬â¼†ç§ï¼š ä½¿â½¤daemonize æ”¾â¼Šåå°â½…å¼ daemonize Unixç³»ç»Ÿåå°å®ˆæŠ¤è¿›ç¨‹ç®¡ç†è½¯ä»¶ ä¼˜ç‚¹ï¼šæ›´åŠ æ­£è§„ åå°è¿â¾æ›´ç¨³å®š




git clone git://github.com/bmc/daemonize.git




sh configure && make && sudo make install




daemonize -c /data/prometheus/ /data/prometheus/up.sh




-c æ˜¯æŒ‡å®šè¿â¾è·¯å¾„




/data/prometheus/up.sh æ˜¯è¿â¾è·¯å¾„ä¸‹çš„ â¼€ä¸ªå¯åŠ¨è„šæœ¬ ä¸‹â¾¯æ˜¯è¿™ä¸ªå¯åŠ¨è„šæœ¬çš„å†…å®¹ å†…å®¹ï¼šå°±æ˜¯å¼€å¯prometheusè¿›ç¨‹

[root@prometheus yd]# cat /data/prometheus/up.sh

/data/prometheus/prometheus --web.listen- address="0.0.0.0:9090" --web.read-timeout=5m --web.max- connections=10 --storage.tsdb.retention=15d -- storage.tsdb.path="data/" --query.max-concurrency=20 -- query.timeout=2m

ç„¶å æˆ‘ä»¬æ¥çœ‹ä¸‹ ./prometheus åœ¨å®é™…ä¼ä¸šè¿â¾æ—¶ å¯åŠ¨å‚æ•°çš„

åˆç†é…ç½®




image




--web.read-timeout=5m Maximum duration before timing out read of the request, and closing idle connections. è¯·æ±‚é“¾æ¥çš„æœ€â¼¤ç­‰å¾…æ—¶é—´ prometheus process -> GET PUSH

é˜²â½Œ å¤ªå¤šçš„ç©ºé—²é“¾æ¥ å â½¤èµ„æº




--web.max-connections=512 Maximum number of simultaneous connections.

æœ€â¼¤é“¾æ¥æ•°




--storage.tsdb.retention=15d

How long to retain samples in the storage. prometheuså¼€å§‹é‡‡é›†ç›‘æ§æ•°æ®å ä¼šå­˜åœ¨å†…å­˜ä¸­å’Œç¡¬ç›˜ä¸­ å¯¹äºä¿ç•™æœŸé™çš„è®¾ç½® å¾ˆé‡è¦ å¤ªé•¿çš„è¯ ç¡¬ç›˜å’Œå†…å­˜éƒ½åƒä¸æ¶ˆ / å¤ªçŸ­çš„è¯ è¦æŸ¥å†å²æ•°æ®å°±æ²¡æœ‰äº†

ä¼ä¸šä¸­è®¾ç½® 15å¤©ä¸ºå®œ




â€”




--storage.tsdb.path="data/"

Base path for metrics storage.

å­˜å‚¨æ•°æ®è·¯å¾„ è¿™ä¸ªä¹Ÿå¾ˆé‡è¦ ä¸è¦éšä¾¿æ”¾åœ¨â¼€ä¸ªåœ°â½…å°±æ‰§â¾ ä¼š æŠŠ/ æ ¹â½¬å½•å¡æ»¡äº†

--query.timeout=2m Maximum time a query may take before being aborted.

--query.max-concurrency=20

Maximum number of queries executed

concurrently.




ä¸Šâ¾¯è¿™ä¸¤é¡¹ æ˜¯å¯¹ â½¤æˆ·æ‰§â¾prometheus æŸ¥è¯¢æ—¶å€™çš„ ä¼˜åŒ–è®¾ç½® é˜²â½Œå¤ªå¤šçš„â½¤æˆ·åŒæ—¶æŸ¥è¯¢ï¼Œä¹Ÿé˜²â½Œå•ä¸ªâ½¤æˆ·æ‰§â¾è¿‡â¼¤çš„æŸ¥è¯¢

â½½â¼€ç›´ä¸é€€å‡º




å¦‚ä¸Šè¿™â¼é¡¹å‚æ•° é…ç½®ä¸Šå»å prometheusè¿â¾ å°±ç›¸å¯¹ç¨³å¦¥å¤šäº†

image

ğŸ˜ƒ




image




webä¸Šç›´æ¥è¾“â¼Š ip:port å°±å¯ä»¥è¿›â¼Šâ¾¸é¡µ è¿™â¾¥é‡åˆ°â¼€ä¸ªé—®é¢˜

å°±æ˜¯ prometheus å¯¹ç³»ç»Ÿæ—¶é—´ â¾®å¸¸æ•æ„Ÿ â¼€å®šè¦æ—¶æ—¶åˆ»åˆ» ä¿è¯ ç³»ç»Ÿæ—¶é—´åŒæ­¥ ä¸ç„¶ æ›²çº¿æ˜¯ä¹±çš„

ntpdate å¾ªç¯åŒæ­¥æ—¶é—´å é”™è¯¯æâ½°å°±æ²¡æœ‰äº†




image




prometheus è¿â¾æ—¶ å­˜æ”¾çš„å†å²æ•°æ® åœ¨è¿™â¼‰




image

å…¶ä¸­ è¿™äº› é•¿ä¸²å­—æ¯çš„ æ˜¯å†å²æ•°æ®ä¿ç•™




â½½ å½“å‰è¿‘æœŸæ•°æ® å®é™…ä¸Šä¿ç•™åœ¨å†…å­˜ä¸­




å¹¶ä¸” æŒ‰ç…§â¼€å®šé—´éš” å­˜æ”¾åœ¨ wal / â½¬å½•ä¸­ é˜²â½Œçªç„¶æ–­ç”µ æˆ–è€… é‡ å¯ ä»¥â½¤æ¥ æ¢å¤å†…å­˜ä¸­çš„æ•°æ® ï¼ˆè¿™ä¸ªå’±ä»¬ä¹‹å‰ä¹Ÿæåˆ°è¿‡ï¼‰




ï¼ˆâ¼†ï¼‰ prometheus æœåŠ¡ç«¯é…ç½®â½‚ä»¶å†™æ³•




prometheus_server å®‰è£…ç¨³å¦¥ä¹‹å å’±ä»¬è¦æ¥çœ‹ä¸‹é…ç½®â½‚ä»¶




/data/prometheus/prometheus.yml




é…ç½®â½‚ä»¶æ˜¯ è¿â¾åœ¨å“ªä¸ªâ½¬å½• å°±é»˜è®¤è¯»å– å“ªä¸ªâ½¬å½•ä¸‹

prometheus.ymlâ½‚ä»¶ é™¤â¾®ä½¿â½¤å‚æ•°æŒ‡å®šå…¶ä»–ä½ç½®çš„ é…ç½®â½‚ä»¶




é…ç½®â½‚ä»¶ä¸­ æˆ‘ä»¬ä¸»è¦å…³æ³¨ è¿™â¼ä¸ªåœ°â½…

global:

scrape_interval: 15s # Set the scrape interval to every 15 seconds. Default is every 1 minute.

evaluation_interval: 15s # Evaluate rules every 15 seconds. The default is every 1 minute.




scrape_configs:

# The job name is added as a label `job=<job_name>` to any timeseries scraped from this config.
- job_name: 'prometheus'




# metrics_path defaults to '/metrics'

# scheme defaults to 'http'.




static_configs:

- targets: ['prometheus.server:9090','prometheus.server:9100']

- job_name: 'pushgateway' static_configs:


- targets: ['localhost:9091','localhost:9092']

- job_name: 'aliyun' static_configs:

- targets: [â€˜server4:9100','web3:9100â€™,'server6:9100â€™,'sesrver7:9100','we b8:9100','log1:9100â€™,'mysql1:9100â€™]

â¼€ä¸ªå°±æ˜¯ å…¨å±€å˜é‡ scrape_interval è®¾ç½®å¤šå°‘æ—¶é—´é—´éš” é‡‡é›†â¼€

æ¬¡æ•°æ®




å¦â¼€ä¸ª å°±æ˜¯ jobå’Œtargetsçš„å†™æ³• é…ç½®â¼€ä¸ªjobçš„æ ‡ç­¾ï¼Œç„¶å åœ¨ è¿™ä¸ªæ ‡ç­¾ä¸‹ å®šä¹‰ æˆ‘ä»¬éœ€è¦ç›‘æ§çš„æœºå™¨




targets: [â€˜server4:9100â€™ hostname + ç«¯â¼œ

â½½è¿™â¾¥çš„ç«¯â¼œ å®é™…ä¸Š å°±æ˜¯ node_exporterçš„é»˜è®¤è¿â¾ç«¯â¼œ




hostname server01 prometues => dns

/etc/hosts

local dns server




ï¼ˆä¸‰ï¼‰ node_exporter å®‰è£…å’Œåå°è¿â¾




node_exporterçš„ä¸‹è½½å’Œå®‰è£… è·Ÿprometheusä¹Ÿæ˜¯â¼€æ ·çš„ è¿™â¾¥å°±ä¸å†æ¼”â½°äº†




ä¸‹è½½åœ°å€ä¸º

https://prometheus.io/download/#node_exporter




åŒæ ·é€‚â½¤ daemonize æ”¾â¼Šè¢«ç›‘æ§æœåŠ¡å™¨åå°è¿â¾




[root@web7 ~]# ps -ef | grep node_exporter




root 7400 1 0 2017 ? 00:00:00 /bin/sh /usr/local/ node_exporter/up.sh

root 7402 7400 0 2017 ? 01:34:41 /usr/local/ node_exporter/node_exporter

é»˜è®¤è¿â¾åœ¨ 9100ç«¯â¼œ




ï¼ˆå››ï¼‰ node_exporter è§‚å¯Ÿ å’Œ é‡‡é›†æ•°æ® è¿â¾åœ¨åå°ä»¥å

æˆ‘ä»¬éœ€è¦ é’ˆå¯¹è¿™ä¸ª node_exporter è¿›â¾åˆæ­¥çš„â¼¿åŠ¨æŸ¥è¯¢ ä»¥ç¡® ä¿ æ­£å¸¸è·å–ç›‘æ§æ•°æ®




â½¤å¦‚ä¸‹â½…æ³• æœ¬åœ°æŸ¥è¯¢

[root@web7 ~]# curl localhost:9100/metrics




-node_cpu{cpu="cpu7",mode="steal"} 0

node_cpu{cpu="cpu7",mode="system"} 131503.32

-node_cpu{cpu="cpu7",mode="user"} 397798.53 prometheus 15s GETè¯·æ±‚

åªæœ‰æŒ‘â¼ä¸ªé‡è¦çš„ key çœ‹åˆ°æœ‰æ•°æ®é‡‡é›†ä¸Šæ¥ å°±OKäº†

prometheus å‘½ä»¤â¾




node_exporter ç»è¿‡å®é™…æµ‹è¯• åœ¨ Centos/Redhat ä»»æ„ç‰ˆæœ¬ç³»ç»Ÿä¸­ å‡å¯ä»¥é¡ºåˆ©è¿â¾ ï¼ˆubantu debian ï¼‰

è¿˜æ²¡æœ‰é‡åˆ°è¿‡ ä»€ä¹ˆé—®é¢˜

image

ç»™node_exporterçš„å¼€å‘è€… ç‚¹ä¸ªèµ ğŸ‘Œ




ç„¶å æˆ‘ä»¬å»åˆ° node_exporteråœ¨ githubä¸Šçš„åœ°å€

æ¥çœ‹çœ‹ æˆ‘ä»¬ä¼Ÿâ¼¤çš„ç¤¾åŒºå¼€å‘è€…ä»¬ éƒ½ç»™å’±ä»¬æä¾›äº† å“ªäº›æœ‰â½¤çš„ é‡‡é›†é¡¹â½¬




https://github.com/prometheus/node_exporter




image




å°½ç„¶åœ¨ githubä¸Š é‚£å°±å¾ˆâ¾ƒç„¶äº† å’±ä»¬çš„node_exporter ä¹Ÿâ¼€æ ·æ˜¯

å¼€æºé¡¹â½¬

æœ¬â¾ä½¿â½¤ goè¯­â¾”å‘å¼€

åâ¾¯ æä¾›äº† node_exporter é»˜è®¤å¼€å¯ å’Œ ä¸å¼€å¯çš„ ç›‘æ§é¡¹â½¬ å¯ä»¥ç›‘æ§çš„å†…å®¹â¾®å¸¸çš„å¤š åºâ¼¤

æ„Ÿå…´è¶£çš„æœ‹å‹ å¯ä»¥â¾ƒâ¾ æ»¡æ»¡æŒ–æ˜

Enabled by default




Name Description OS

arp

Exposes ARP statistics from /proc/net/arp.

Linux bcache

Exposes bcache statistics from /sys/fs/bcache/.

Linux conntrack

Shows conntrack statistics (does nothing if no /proc/ sys/net/netfilter/ present).

Linux

cpu

Exposes CPU statistics

Darwin, Dragonfly, FreeBSD, Linux diskstats

Exposes disk I/O statistics.

Darwin, Linux edac

Exposes error detection and correction statistics.

Linux entropy

Exposes available entropy.

Linux exec

Exposes execution statistics.

Dragonfly, FreeBSD filefd

Exposes file descriptor statistics from /proc/sys/fs/ file-nr.

Linux filesystem

Exposes filesystem statistics, such as disk space used.

Darwin, Dragonfly, FreeBSD, Linux, OpenBSD hwmon

Expose hardware monitoring and sensor data from /sys/ class/hwmon/.

Linux

infiniband

Exposes network statistics specific to InfiniBand and Intel OmniPath configurations.

Linux ipvs

Exposes IPVS status from /proc/net/ip_vs and stats from /proc/net/ip_vs_stats.

Linux

loadavg

Exposes load average.

Darwin, Dragonfly, FreeBSD, Linux, NetBSD, OpenBSD,

Solaris mdadm

Exposes statistics about devices in /proc/mdstat (does nothing if no /proc/mdstat present).

Linux

meminfo

Exposes memory statistics.

Darwin, Dragonfly, FreeBSD, Linux, OpenBSD netdev

Exposes network interface statistics such as bytes transferred.

Darwin, Dragonfly, FreeBSD, Linux, OpenBSD netstat

Exposes network statistics from /proc/net/netstat. This is the same information as netstat -s.

Linux

nfs

Exposes NFS client statistics from /proc/net/rpc/nfs. This is the same information as nfsstat -c.

Linux

nfsd

Exposes NFS kernel server statistics from /proc/net/ rpc/nfsd. This is the same information as nfsstat -s.

Linux

sockstat

Exposes various statistics from /proc/net/sockstat.

Linux stat

Exposes various statistics from /proc/stat. This includes boot time, forks and interrupts.

Linux textfile

Exposes statistics read from local disk. The -- collector.textfile.directory flag must be set. any

time

Exposes the current system time.

any

timex

Exposes selected adjtimex(2) system call stats.

Linux uname

Exposes system information as provided by the uname system call.

Linux

vmstat

Exposes statistics from /proc/vmstat.

Linux wifi

Exposes WiFi device and station statistics.

Linux xfs

Exposes XFS runtime statistics. Linux (kernel 4.4+)

zfs

Exposes ZFS performance statistics. Linux

Disabled by default




Name Description OS

bonding

Exposes the number of configured and active slaves of Linux bonding interfaces.

Linux buddyinfo

Exposes statistics of memory fragments as reported by / proc/buddyinfo.

Linux devstat

Exposes device statistics Dragonfly, FreeBSD

drbd

Exposes Distributed Replicated Block Device statistics (to version 8.4)

Linux interrupts

Exposes detailed interrupts statistics.

Linux, OpenBSD ksmd

Exposes kernel and system statistics from /sys/kernel/ mm/ksm.

Linux

logind

Exposes session counts from logind.

Linux meminfo_numa

Exposes memory statistics from /proc/meminfo_numa.

Linux mountstats

Exposes filesystem statistics from /proc/self/ mountstats. Exposes detailed NFS client statistics.

Linux ntp

Exposes local NTP daemon health to check time

any

qdisc

Exposes queuing discipline statistics Linux

runit

Exposes service status from runit.

any

supervisord

Exposes service status from supervisord.

any

systemd

Exposes service and system status from systemd.

Linux tcpstat

Exposes TCP connection status information from /proc/ net/tcp and /proc/net/tcp6. (Warning: the current version has potential performance issues in high load situations.)




å¦å¤– è¿™äº›é¡¹â½¬ å¯ä»¥é€šè¿‡ node_exporterçš„â¾ƒå®šä¹‰ å¯åŠ¨å‚æ•° æ¥ å®ç° å¼€å¯




./node_exporter â€”help




--collector.arp Enable the arp collector (default: enabled).

--collector.bcache Enable the bcache collector (default: enabled).

--collector.bonding Enable the bonding collector (default: disabled).

--collector.buddyinfo Enable the buddyinfo collector (default: disabled).

--collector.conntrack Enable the conntrack collector (default: enabled).

--collector.cpu Enable the cpu collector (default: enabled).

--collector.diskstats Enable the diskstats collector (default: enabled).

--collector.drbd Enable the drbd collector (default: disabled).

--collector.edac Enable the edac collector (default: enabled).

--collector.entropy Enable the entropy collector (default: enabled).

--collector.filefd Enable the filefd collector (default: enabled).

--collector.filesystem Enable the filesystem collector (default: enabled).

--collector.gmond Enable the gmond collector (default: disabled).

--collector.hwmon Enable the hwmon collector (default: enabled).

--collector.infiniband Enable the infiniband collector (default: enabled).

--collector.interrupts Enable the interrupts collector (default: disabled).

--collector.ipvs Enable the ipvs collector (default: enabled).

--collector.ksmd Enable the ksmd collector (default: disabled).

--collector.loadavg Enable the loadavg collector (default: enabled).

--collector.logind Enable the logind collector (default: disabled).

--collector.mdadm Enable the mdadm collector (default: enabled).




ï¼ˆäº”ï¼‰ prometheus æŸ¥è¯¢é‡‡é›†å›æ¥çš„å„ç§æ•°æ® æ¥ä¸‹æ¥ æˆ‘ä»¬å›åˆ° prometheusçš„ä¸»ç•Œâ¾¯

éªŒè¯â¼€ä¸‹ æˆ‘ä»¬æ–°éƒ¨ç½²çš„ ç›‘æ§æœºå™¨ä¸Šçš„node_exporter æ˜¯å¦ç»™æˆ‘ ä»¬ æ­£ç¡®è¿”å›äº† æ•°æ®




éšä¾¿æŒ‘â¼ä¸ª key å°±å¯ä»¥æŸ¥çœ‹

å¦å¤– prometheus çš„å‘½ä»¤â¾ æœ¬â¾ä¹Ÿâ½€æŒsuggest åŠŸèƒ½ï¼ˆè¾“â¼Šæ

â½°ï¼‰




image

éšä¾¿æ‰¾ä¸ªkey æŸ¥è¯¢â¼€ä¸‹ æ˜¯å¦æœ‰è¾“å‡ºå›¾è¾“å‡º å°±å¯ä»¥äº†




æœ¬â¾node_exporteræä¾›çš„ keys å®åœ¨å¤ªå¤šäº† ï¼ˆå› ä¸º éƒ½æ˜¯ä» Linuxç³»ç»Ÿä¸­çš„ åº•å±‚ å„ç§æŒ–æ˜æ•°æ®å›æ¥ï¼‰




æˆ‘ä»¬æ²¡æœ‰æ—¶é—´ ä¹Ÿæ²¡æœ‰å¿…è¦ æŠŠæ¯â¼€ä¸ªkey éƒ½æŒæ¡ åªè¦çŸ¥é“ â¼€ éƒ¨åˆ†é‡è¦çš„ å¿…é¡»çš„key å°±â¾œå¤Ÿäº†




ï¼ˆå…­ï¼‰ ä½¿â½¤æˆ‘ä»¬ä¹‹å‰çš„å­¦è¿‡çš„ prometheus å‘½ä»¤â¾çš„å½¢å¼ ç»ƒä¹  ç»„åˆå„ç§ç›‘æ§å›¾

æ¥ä¸‹æ¥ å’±ä»¬æ‰¾â¼€ä¸ª â½è¾ƒé‡è¦çš„key ç„¶å â½¤æˆ‘ä»¬å­¦è¿‡çš„ å‘½ä»¤â¾

â½…å¼ ç»™ä»–ç»„æˆâ¼€ä¸ª ä¸´æ—¶ç›‘æ§å›¾




â½å¦‚

node_cpu node_memory node_disk

ç­‰ç­‰ è¿™â¾¥æˆ‘ä»¬ä¸å†åšæ¼”â½°äº†




å¯ä»¥â¾ƒâ¾æ‰¾â¼ä¸ªç±»ä¼¼çš„ keys ç»„æˆç›‘æ§å›¾




image

ä¸è¿‡è¿™â¾¥æœ‰â¼€ä¸ªé—®é¢˜..




å‘½ä»¤â¾ç»„æˆç›‘æ§å›¾ä¹‹å è¿™äº›å›¾éƒ½æ˜¯ä¸´æ—¶çš„ å¦‚æœæˆ‘å…³é—­äº†æµ è§ˆå™¨ é‚£ä¹ˆä¸‹æ¬¡å†æƒ³çœ‹çš„æ—¶å€™å°±æ²¡æœ‰äº† åˆè¦é‡æ–°è¾“â¼ŠæŸ¥è¯¢è¯­å¥

ï¼ˆâ¿‡çƒ¦ä¸ï¼‰

â½½ä¸”prometheus â¾ƒå¸¦çš„è¿™ä¸ª ç›‘æ§å›¾ å®é™…ä¸Š å¹¶ä¸ç¾è§‚

é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½• æ—¢èƒ½æ°¸ä¹…ä¿å­˜è¿™äº› ç›‘æ§å›¾ ï¼Œåˆå¯ä»¥è®©å®ƒæ›´ç¾è§‚

å‘¢ï¼Ÿ

è¯·å…³æ³¨ æˆ‘ä»¬åâ¾¯çš„ç¯‡ç« ï¼ˆGrafana + promethuesï¼‰




image




image




image


